(()=>{"use strict";document.getElementById("button-back").addEventListener("click",(()=>{location.href="https://anna-khizhniak.site/"})),function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}(),function(){$(document).ready((function(){$("#callBurger").on("click",(e=>{$("#burger").toggleClass("show"),$("body").toggleClass("fixed"),$(".burger__container").toggleClass("scroll"),e.preventDefault()}))}));let e=document.querySelector(".menu__btn"),t=document.querySelector(".burger");e.addEventListener("click",(()=>{e.classList.toggle("active"),t.classList.toggle("active")}))}(),function(){const e=document.getElementById("sidebar"),t=document.getElementById("sidebar-menu");window.screen.width<=768&&e&&(t.classList.add("bl-hidden"),e.addEventListener("click",(n=>{n.preventDefault(),t.classList.toggle("bl-hidden"),e.classList.toggle("sidebar-button")})))}(),function(){const e=document.getElementById("filter-show-button"),t=document.getElementById("search-sidebar");window.screen.width<=768&&t&&(t.classList.add("bl-hidden"),e.addEventListener("click",(e=>{e.preventDefault(),t.classList.toggle("bl-hidden")})))}(),function(){const e=document.getElementById("price-up-link"),t=document.getElementById("price-down-link"),n=document.getElementById("search-sidebar");window.screen.width<=500&&n&&(e.innerText="↓",t.innerText="↑")}(),function(){document.addEventListener("DOMContentLoaded",(n=>{let a=[...document.querySelectorAll('a[data-modal="callModal"]')];const r=document.getElementById("modal"),o=document.getElementById("closeModal"),s=document.getElementById("scroll-on-content"),l=(document.getElementById("login-inner-content"),document.getElementById("login-form-template").innerHTML),i=document.getElementById("regist-form-template").innerHTML,d=document.getElementsByTagName("body")[0],c=document.getElementById("favorite-header");let m,u;if(r.classList.add("scroll"),document.getElementById("send-order")){const e=document.getElementById("send-order"),t=document.getElementById("main-basket"),n=document.getElementById("sent-order-template").innerHTML;e.addEventListener("click",(e=>{e.preventDefault(),t.innerHTML="",t.innerHTML=n,window.scrollTo(0,0),a=[...document.querySelectorAll('a[data-modal="callModal"]')],p(a)}))}function g(){r.classList.remove("show"),d.classList.remove("fixed"),window.location.replace("main-user-page.html")}function p(e){e.forEach((e=>{localStorage.getItem("token")&&(e.innerText="Кабинет",c.innerText="Избранное"),e.addEventListener("click",(e=>{e.preventDefault(),localStorage.getItem("token")?window.location.replace("https://anna-khizhniak.site/portfolio/store-HobbyArt/main-user-page.html"):(window.screen.width<=768&&document.getElementById("callBurger").classList.add("bl-hidden"),r.classList.add("show"),d.classList.add("fixed"),h())}))}))}function h(){m=document.getElementById("modal-registration-login"),m.addEventListener("click",(e=>{e.preventDefault(),function(e,t,n){const a=document.getElementById("enter-error-block");localStorage.getItem("token")?g():fetch("https://reqres.in/api/login",{method:"POST",body:JSON.stringify({email:e,password:t}),headers:{"content-type":"application/json"}}).then((e=>e.json())).then((e=>{if(e.token)return n&&localStorage.setItem("token",e.token),g(),e.token;a.innerText="Ошибка входа! Проверьте правильность данных или заполните все поля!"})).catch((e=>{console.error(e),a.innerText="Something gone wrong"}))}(document.getElementById("user-email").value,document.getElementById("user-password").value,document.getElementById("checkbox-save-user").checked)}))}function y(){document.getElementById("modal-registration-forgot-button").addEventListener("click",(n=>{n.preventDefault(),s.innerHTML=e,t(document.getElementById("forgot-password-button"),s)}))}p(a),function t(){s.innerHTML=l,u=document.getElementById("regist-button"),u.addEventListener("click",(n=>{n.preventDefault(),s.innerHTML=i,function(){const e=new RegExp("^[A-Za-zА-Яа-яЁёЁЇїІіЄєҐґ]{2,15}$"),t=new RegExp("^(\\+)[\\d]{10,13}\\d$"),n=new RegExp("^([a-z0-9_-]+\\.)*[a-z0-9_-]+@[a-z0-9_-]+(\\.[a-z0-9_-]+)*\\.[a-z]{2,6}$"),a=new RegExp("^(?=(?:[^A-Z]*[A-Z]){1,}[^A-Z]*$)(?=(?:[^a-z]*[a-z]){1,}[^a-z]*$)(?=(?:\\D*\\d){1,}\\D*$)[A-Za-z\\d]{6,}$"),r=document.getElementById("send-registered-data"),o=document.getElementById("user-name-reg"),s=document.getElementById("user-last-name-reg"),l=document.getElementById("user-sur-name-reg"),i=document.getElementById("regist-user-phone-reg"),d=document.getElementById("user-email-reg"),c=document.getElementById("regist-user-password-reg"),m=document.getElementById("user-confirm-password-reg"),u=document.getElementById("reg-error-block");function g(e,t){e.addEventListener("keyup",(n=>{n.preventDefault(),e.value.length>1&&""!==e.value&&(t.test(e.value)?e.setAttribute("style","background-color:#edf9eb"):e.setAttribute("style","background-color:#f9ebeb"),""!==c.value&&""!==m.value&&c.value.length>=6&&m.value.length>=6&&(c.value!==m.value&&!a.test(c.value)||!a.test(m.value)?u.innerText="Пароли не совпадают или не соответствуют формату!":u.innerText="Пароли совпадают"),function(){const e=[...document.querySelectorAll('input[style="background-color:#edf9eb"]')];7===e.length?r.disabled=!1:e.length<7&&(r.disabled=!0)}())}))}g(o,e),g(s,e),g(l,e),i.addEventListener("focus",(e=>{e.preventDefault(),""===i.value?(i.value="+",g(i,t)):g(i,t)})),g(d,n),g(c,a),g(m,a)}(),document.getElementById("send-registered-data").addEventListener("click",(t=>{t.preventDefault(),fetch("https://reqres.in/api/register",{method:"POST",body:JSON.stringify({email:"eve.holt@reqres.in",password:"pistol"}),headers:{"content-type":"application/json"}}).then((e=>e.json())).then((t=>{t.token&&setTimeout((()=>{s.innerHTML=e;const t=document.getElementById("forgot-password-inner-content");t.innerText="",t.innerHTML='<p class="error-message">Регистрация прошла успешно!</p>',setTimeout((()=>{window.location.reload()}),1500)}),100)}))})),document.getElementById("login-button").addEventListener("click",(e=>{e.preventDefault(),s.innerHTML="",s.innerHTML=l,t(),y(),h()}))}))}(),y(),o.addEventListener("click",(e=>{e.preventDefault(),r.classList.remove("show"),d.classList.remove("fixed"),window.location.reload()})),c.addEventListener("click",(e=>{e.preventDefault(),localStorage.getItem("token")?window.location.replace("https://anna-khizhniak.site/portfolio/store-HobbyArt/main-user-page.html#favorite"):p(a)}))}));const e=document.getElementById("forgot-password-form-template").innerHTML;function t(n,a){n.addEventListener("click",(n=>{n.preventDefault(),function(n,a){const r=new RegExp("^([a-z0-9_-]+\\.)*[a-z0-9_-]+@[a-z0-9_-]+(\\.[a-z0-9_-]+)*\\.[a-z]{2,6}$");n.value.length>1&&""!==n.value?r.test(n.value)?(setTimeout((()=>{window.location.reload()}),2e3),a.innerHTML='<p class="error-message">Your email successfully sent! Check your mailbox and try login again.</p>'):(setTimeout((()=>{a.innerHTML=e,t(document.getElementById("forgot-password-button"),a)}),2e3),a.innerHTML='<p class="error-message">Wrong email format.</p>\n                    <p class="error-message">Example: name@gmail.com.</p>'):(setTimeout((()=>{a.innerHTML=e,t(document.getElementById("forgot-password-button"),a)}),2e3),a.innerHTML='<p class="error-message">Enter your email.</p>')}(document.getElementById("forgot-password-email"),a)}))}!function(){const e=document.getElementById("user-page-exit");e&&e.addEventListener("click",(e=>{e.preventDefault(),localStorage.getItem("token")?(localStorage.removeItem("token"),window.location.replace("https://anna-khizhniak.site/portfolio/store-HobbyArt/")):window.location.replace("https://anna-khizhniak.site/portfolio/store-HobbyArt/")}))}()}(),document.getElementById("comments-popup")&&document.getElementById("comments-popup").addEventListener("click",(e=>{e.preventDefault();let t=window.open("","_blank","width=700px, height=400px, left=500, top=500");const n=t.document,a=document.getElementById("popup-template");n.write(`${a.innerHTML}`);let r=n.getElementsByTagName("head")[0];!function(){let e=n.createElement("link");e.href="css/style.css",e.rel="stylesheet",r.appendChild(e)}();const o=n.getElementById("system-messages"),s=n.getElementById("popup-textarea");let l=n.getElementById("symbol-count");s.addEventListener("keyup",(e=>{if(e.preventDefault(),!(l.innerText>="1"))return l.innerText="0",!1;l.innerText=--l.innerText})),n.getElementById("popup-submit").addEventListener("click",(e=>{e.preventDefault(),fetch("https://reqres.in/api/users/2",{method:"PATCH",body:JSON.stringify({text:s.value}),headers:{"content-type":"application/json"}}).then((e=>{!function(e,n){"200"==e&&""!=n&&n.length>="10"?(o.innerHTML="Комментарий успешно отправлен!",setTimeout((()=>{t.close()}),2e3)):"0"==n.length||n.length<"10"?o.innerHTML="Введите ваш комментарий! Длина сообщения должна быть больше 10 символов!":"200"!=e&&(o.innerHTML="Ошибка отправки!")}(e.status,s.value)}))}))})),(document.getElementById("main-basket")||document.getElementById("product-details"))&&function(){let e,t=[],n=[];const a=/[^0-9]/g;document.addEventListener("DOMContentLoaded",(r=>{if(document.getElementById("product-details"))document.getElementById("about-details").addEventListener("click",(t=>{let n=document.querySelector(`[data-name="${t.target.dataset.name}"]>span.result`),r=document.querySelector(`[data-name="${t.target.dataset.name}"]+[data-price="basket-item-price"]`),o=r.innerText.replace(a,"");if(r.dataset.currentCount||(r.dataset.currentCount=o),e=r.dataset.currentCount,t.target.dataset.name)if(t.target.classList.contains("plus")){n.innerText=++n.innerText;let t=e*n.innerText;r.innerText=`${t} ₽`}else t.target.classList.contains("minus")&&(n.innerText<=1?(n.innerText="1",r.innerText=`${e} ₽`):(n.innerText=n.innerText-1,r.innerText=o-e+" ₽"))}));else{const o=document.getElementById("count-products");let s=document.getElementById("delivery-price").innerText.replace(a,""),l=document.getElementById("discount").innerText.replace(a,"");const i=document.getElementById("total-sum-discount");i.innerText.replace(a,"");const d=document.getElementById("total-sum");let c=+d.innerText.replace(a,"");document.getElementById("header").classList.add("bg-white");let m=[...document.querySelectorAll('[data-count="count-block"]')];g(m),h([...document.querySelectorAll('[data-delete="basket-item-delete"]')]);let u=[...document.querySelectorAll("button>span.result")];function g(e){0===e.length?(d.innerText="0",i.innerText="229 ₽",o.innerText="0"):e.forEach((e=>{t=[...e.children],t.forEach((e=>{e.dataset.price&&(n=+e.innerText.replace(a,""),c+=+n,d.innerText=`${c} ₽`,i.innerText=+s+ +c-l+" ₽")}))}))}function p(e){o.innerText=0,e.forEach((e=>{let t=+o.innerText;t+=+e.innerText,o.innerText=`${t}`}))}function h(e){let n;e.forEach((e=>{e.addEventListener("click",(a=>{c=0,a.preventDefault(),t=e.parentElement.parentElement,t.remove(),t.isConnected||[...document.querySelectorAll('[data-delete="basket-item-delete"]')].length<3&&(n=[...document.querySelectorAll('[data-count="count-block"]')],g(n),p([...document.querySelectorAll("button>span.result")]))}))}))}p(u),document.addEventListener("click",(t=>{let n=t.target.dataset.name;c=0;let r=document.querySelector(`[data-name="${n}"]>span.result`),o=document.querySelector(`[data-name="${n}"]+[data-price="basket-item-price"]`),s=o.innerText.replace(a,"");if(o.dataset.currentCount||(o.dataset.currentCount=s),e=o.dataset.currentCount,t.target.dataset.name)if(m=[...document.querySelectorAll('[data-count="count-block"]')],u=[...document.querySelectorAll("button>span.result")],t.target.classList.contains("plus")){r.innerText=++r.innerText;let t=e*r.innerText;o.innerText=`${t} ₽`,g(m),p(u)}else t.target.classList.contains("minus")&&(r.innerText<=1?(r.innerText="1",o.innerText=`${e} ₽`,g(m),p(u)):(r.innerText=r.innerText-1,o.innerText=s-e+" ₽",g(m),p(u)))}))}}))}(),document.querySelector(".swiper")&&(new Swiper(".mySwiper",{slidesPerView:1,spaceBetween:15,loop:!0,autoplay:!0,pagination:{el:".swiper-pagination",type:"fraction"},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}),new Swiper(".mySwiper-2",{slidesPerView:5,spaceBetween:25,direction:"horizontal",loop:!0,autoplay:!0,navigation:{nextEl:".swiper-button-next-2",prevEl:".swiper-button-prev-2"},breakpoints:{320:{slidesPerView:1,spaceBetween:15},425:{slidesPerView:2,spaceBetween:10},768:{slidesPerView:3,spaceBetween:10},1280:{slidesPerView:3,spaceBetween:20},1441:{slidesPerView:4,spaceBetween:25},1601:{slidesPerView:5,spaceBetween:25}}}),new Swiper(".mySwiper-3",{slidesPerView:3,spaceBetween:24,loop:!0,navigation:{nextEl:".swiper-button-next-3",prevEl:".swiper-button-prev-3"},breakpoints:{300:{slidesPerView:1,spaceBetween:15},945:{slidesPerView:2,spaceBetween:15},1601:{slidesPerView:3,spaceBetween:15}}})),document.getElementById("likes-btn")&&function(){const e=document.getElementById("likes-btn"),t=document.getElementById("likes-digit");let n=window.localStorage;const a=document.getElementById("svg-path");let r;r=function(e,r){let o;return n.getItem(e)?(o=n.getItem(e),r.innerText=n.getItem(e)):(o=0,t.innerText="0"),()=>a.classList.contains("clicked-like")?(a.classList.remove("clicked-like"),r.innerText=n.getItem(e),--o):(a.classList.add("clicked-like"),n.setItem(e,r.innerText),++o)}("counterResultsInsta",t),e.addEventListener("click",(()=>{t.innerText=r(),n.setItem("counterResultsInsta",t.innerText)}))}(),document.getElementById("popular-new")&&($(".switch-btn").click((function(){$(this).toggleClass("switch-on"),$(this).hasClass("switch-on")?($("#switcher-label-1").removeClass("red-text"),$("#switcher-label-2").addClass("red-text"),$(this).trigger("on.switch")):($(this).trigger("off.switch"),$("#switcher-label-1").addClass("red-text"),$("#switcher-label-2").removeClass("red-text"))})),$(".switch-btn").on("on.switch",(function(){$($(this).attr("data-id")).removeClass("bl-hide")})),$(".switch-btn").on("off.switch",(function(){$($(this).attr("data-id")).addClass("bl-hide")}))),document.getElementById("user-page-content-block")&&function(){const e="https://anna-khizhniak.site/database/hobbyart/database-json.json",t="https://reqres.in/api/users/2",n=document.getElementById("user-data-template").innerHTML,a=document.getElementById("bonuses-template").innerHTML,r=document.getElementById("mailing-template").innerHTML,o=document.getElementById("no-mailing-template").innerHTML,s=document.getElementById("favorites-template").innerHTML,l=document.getElementById("story-orders-template").innerHTML,i=document.getElementById("review-template").innerHTML,d=document.getElementById("my-data"),c=document.getElementById("bonuses"),m=document.getElementById("mailing"),u=document.getElementById("favorites"),g=document.getElementById("story-orders"),p=document.getElementById("review"),h=document.getElementById("user-page-date-block"),y=(document.getElementById("favorite-header"),document.getElementById("user-name-info")),E=document.getElementById("user-menu-list");let f=[],v=[],w=[];function b(){fetch(e).then((e=>e.json())).then((e=>{h.innerHTML="",e.users.forEach(((e,t)=>{const a=n.replace("{{user-name}}",e.firstName).replace("{{user-last-name}}",e.lastName).replace("{{user-sur-name}}",e.surName).replace("{{birth-date}}",e.birthDate).replace("{{phone-number}}",e.phone).replace("{{email}}",e.email).replace("{{address}}",e.address).replace("{{password}}",e.password);h.insertAdjacentHTML("beforeend",`${a}`),[...document.querySelectorAll(".main__user-page-content-user-edit-link")].forEach(((e,t)=>{e.id="edit-link-"+ ++t}))}))}))}function I(){fetch(e).then((e=>e.json())).then((e=>{const t=e.users[0].favorites.listItems;h.innerHTML="",t.forEach((e=>{const t=s.replace("{{id}}",e.id).replace("{{image}}",e.photo).replace("{{product-name}}",e.name).replace("{{product-price}}",e.price);h.insertAdjacentHTML("beforeend",`${t}`),h.classList.contains("display-block")&&h.classList.remove("display-block")}))}))}window.screen.width<=768&&h&&(E.classList.add("bl-hidden"),y.classList.add("user-block-header"),document.getElementById("user-page-exit").innerText="",y.addEventListener("click",(e=>{e.preventDefault(),E.classList.toggle("bl-hidden"),y.classList.toggle("user-block-header")}))),h&&"https://anna-khizhniak.site/portfolio/store-HobbyArt/main-user-page.html#favorite"===window.location.href?I():h&&"https://anna-khizhniak.site/portfolio/store-HobbyArt/main-user-page.html"===window.location.href&&b(),d.addEventListener("click",(e=>{e.preventDefault(),b()})),h.addEventListener("click",(e=>{e.preventDefault(),document.getElementById(e.target.dataset.input).focus();let n=document.getElementById(e.target.id);n.innerHTML='<img src="img/edit.svg" alt=\\"\\">';const a=document.getElementById("save-edited-data-btn");a.addEventListener("click",(e=>{e.preventDefault(),fetch(t,{method:"PATCH",body:JSON.stringify({id:"1",firstName:document.getElementById("user-name").value,lastName:document.getElementById("user-surname").value,surName:document.getElementById("user-surname-2").value,birthDate:document.getElementById("user-birth-date").value,phone:document.getElementById("user-phone").value,email:document.getElementById("user-page-email").value,address:document.getElementById("user-address").value,password:document.getElementById("user-page-password").value}),headers:{"content-type":"application/json"}}).then((e=>{200===e.status&&(n.innerHTML='<img src="img/edit.svg" alt=\\"\\">Изменить',a.innerText="Сохранено",setTimeout((()=>{a.innerText="Сохранить данные"}),2e3))})).catch((e=>console.log(e)))}))})),c.addEventListener("click",(t=>{t.preventDefault(),fetch(e).then((e=>e.json())).then((e=>{h.innerHTML="",e.users.forEach((e=>{const t=a.replace("{{bonuses}}",e.bonuses);h.insertAdjacentHTML("beforeend",`${t}`)}))}))})),u.addEventListener("click",(e=>{e.preventDefault(),I()})),m.addEventListener("click",(n=>{n.preventDefault(),fetch(e).then((e=>e.json())).then((e=>{e.users.forEach((e=>{"false"==e.mailing&&(h.innerHTML=r,document.getElementById("subscribe").addEventListener("click",(e=>{var n;e.preventDefault(),n=o,fetch(t,{method:"PATCH",body:JSON.stringify({name:"morpheus",job:"zion resident"}),headers:{"content-type":"application/json"}}).then((e=>{200===e.status&&(h.innerHTML=n)})).catch((e=>console.log(e)))})))}))}))})),g.addEventListener("click",(t=>{t.preventDefault();let n=[];fetch(e).then((e=>e.json())).then((t=>{let a=t.users;h.innerHTML="",f=a.map((e=>(v=e.orders.list,[...v]))),w=[],v.forEach((e=>{const t=l.replaceAll("{{id}}",e.id).replace("{{number}}",e.number).replace("{{data}}",e.data).replace("{{timeCreated}}",e.timeCreated).replace("{{sumQuantity}}",e.sumQuantity).replace("{{total}}",e.total).replace("{{dataFinished}}",e.dataFinished);h.insertAdjacentHTML("beforeend",`${t}`),h.classList.contains("display-block")||h.classList.add("display-block"),w.push(document.getElementById(`view-more-${e.id}`)),n.push(document.getElementById(`order-items-block-template-${e.id}`))}));let r=document.getElementById("order-items-template").innerHTML;w.forEach(((t,a)=>{let o=[...t.children];o.forEach(((e,t)=>("img"===e.localName&&(o=t),o))),t.children[o].id=t.dataset.arrow;let s=document.getElementById(`${t.dataset.arrow}`);t.addEventListener("click",(o=>{s.classList.toggle("rotate"),o.preventDefault(),fetch(e).then((e=>e.json())).then((e=>{let o=e.users;f=o.map(((e,t)=>(v=e.orders.list,[...v]))),t.dataset.orderItems===`order-items-${a+1}`&&(n[a].classList.toggle("non-visible"),n[a].innerText="",v[a].content.forEach((e=>{const t=r.replaceAll("{{id}}",e.id).replace("{{image}}",e.image).replace("{{item-name}}",e.name).replace("{{quantity}}",e.quantity).replace("{{price}}",e.price);n[a].insertAdjacentHTML("beforeend",`${t}`)})))}))}))}))}))})),p.addEventListener("click",(e=>{e.preventDefault(),h.innerHTML=i}))}()})();